{% extends 'base.html' %}
{% load i18n %}

{% block title%} HistMat | Home {% endblock%}

{% block js %}
{% load static %}

<script src="{% static 'js/home.js'%}"></script>
{% endblock %}

{% block content %}

<div id="home-app" class="container bg-light h-100 p-3 px-5 shadow">
    {% if important_blog %}
    <div id="carouselExampleIndicators" class="carousel slide carousel-fade" data-ride="carousel">
        <ol class="carousel-indicators">
            {% for blog in important_blog %}
                <li data-target="#carouselExampleIndicators" data-slide-to="{{forloop.counter0}}" {% if forloop.counter0 == 0%}class="active" {% endif %}></li>
            {% endfor %}
        </ol>
        <div class="carousel-inner">
            {% for blog in important_blog%}
            <div class="carousel-item {% if forloop.counter0 == 0%}active {% endif %}">
                <img class="d-block w-100" src="{{blog.thumbnail.url}}" alt="First slide">
                <div class="carousel-caption d-none d-md-block">
                    <h3 class="text-white">{{blog.title}}</h3>
                    <p class="text-white">{{blog.text|truncatechars:300}}</p>
                    <a class="btn btn-secondary" href="{{blog.get_absolute_url}}">{% trans "Leer Noticia" %}</a>
                </div>
            </div>
            {% endfor %}
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
      </div>
      
      {% endif %}
      



    <div class="pt-2">
        <div class="rounded p-2 mt-2 bg-primary shadow">
            <div class="d-flex justify-content-center ">
                <h2 class="text-white"><strong>Feed de amigos</strong></h2>
            </div>
        </div>
        
        <div class="d-flex justify-content-center container">
            <div class="d-flex flex-column w-100">
                {% for action in action_list %}
                    <div class="home_action card w-100 my-2 shadow" style="display: none;">
                        <div class="d-flex flex-row p-3">
                            {% if action.autor.profile_image_t11 %}
                                <img class="rounded" src="{{ action.autor.profile_image_t11.url }}" width="100" height="100" alt="{{ action.autor.username }} profile pic" />
                            {% endif %}
                            <div class="card-body p-2 pt-3"><h6>{{action.text|safe}}</h6></div>
                            
                        </div>
                        <div class="card-footer p-1">{{action.timestamp}}</div>
                    </div>
                {% empty %}
                    <h3>No hay cambios en la lista</h3>
        
                {% endfor %}
                </div>
        </div>
        
        
    </div>
    
    </div>

{% endblock %}