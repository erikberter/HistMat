{% extends 'base.html' %}
{% load i18n %}

{% block title %}
    {% trans 'Mi catalogo' %} | HistMat
{% endblock %}

{% load static %}

{% block css%}
    <link rel="stylesheet" type="text/css" href="{% static 'css/widgets/fab.css' %}">    
    <link rel="stylesheet" type="text/css" href="{% static 'css/simple-sidebar.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/widgets/search_bar.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/Biblio/catalog.css' %}">
    <link type="text/css" href="{% static 'css/external/cptn03.css' %}" rel="stylesheet">
    
{% endblock %}

{% block js%}

    <script src="//cdn.jsdelivr.net/npm/sortablejs@1.8.4/Sortable.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/Vue.Draggable/2.20.0/vuedraggable.umd.min.js"></script>
    
    {% csrf_token %}
    <script type="text/javascript">     window.CSRF_TOKEN = "{{ csrf_token }}"; </script> 
    <script src="{% static 'js/Biblio/widgets.js' %}"> </script>
    <script src="{% static 'js/Biblio/general.js' %}"> </script>
    <script src="{% static 'js/Biblio/mycatalog.js' %}"> </script>
    <script src="{% static 'js/Biblio/book_public.js' %}"> </script>

    <script>
        var fab = new Vue({
            el: '#fab-container',
            data: {
                create_url: "{% url 'biblio:book_create'%}"
            },
            methods: {
                fab_action: function (event) {
                    window.location = this.create_url;
                }
            }
        })
    </script>
    <script type="text/x-template" id="modal_book_list">
        {% include "Biblio/_book_shelf_list.html" %}
    </script>
    <script type="text/x-template" id="modal_book">
        {% include "Biblio/_book.vue" %}
    </script>
    

{% endblock %}

{% block content%}

<div class="p-0 m-0">
    
    <div id="catalog-app" > 
        <div id="wrapper" class="d-flex flex-row flex-nowrap h-100">
            {% include 'Biblio/_filter_sidebar.html'%}
            
            <div id="catalog-content" class="p-4 w-100">
                <div id="book-to-add" class="d-flex flex-column w-100">
                    <modal_book_list 
                    class="shadow-sm m-2"
                    v-for="book_list in book_lists"
                    v-bind:book_state='book_list.book_state'
                    v-bind:shelf_title='book_list.shelf_title'
                    v-bind:books='book_list.books'
                    v-bind:search_query = 'search_query'
                    ></modal_book_list>
                </div>
            </div>
    </div>
    </div>
</div>


{% endblock %}

{% block widgets %}
{% include 'widgets/fab.html'%}
{% endblock %}
